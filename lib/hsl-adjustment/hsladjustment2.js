'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var source = "struct HslUniforms {\r\n  uHsl:vec3<f32>,\r\n  uColorize:f32,\r\n  uAlpha:f32,\r\n};\r\n\r\n@group(0) @binding(1) var uTexture: texture_2d<f32>; \r\n@group(0) @binding(2) var uSampler: sampler;\r\n@group(1) @binding(0) var<uniform> hslUniforms : HslUniforms;\r\n\r\n@fragment\r\nfn mainFragment(\r\n  @location(0) uv: vec2<f32>,\r\n  @builtin(position) position: vec4<f32>\r\n) -> @location(0) vec4<f32> {\r\n    let color: vec4<f32> = textureSample(uTexture, uSampler, uv);\r\n    var resultRGB: vec3<f32> = color.rgb;\r\n\r\n    let hue: f32 = hslUniforms.uHsl[0];\r\n    let saturation: f32 = hslUniforms.uHsl[1];\r\n    let lightness: f32 = hslUniforms.uHsl[2];\r\n\r\n    // colorize\r\n    if (hslUniforms.uColorize > 0.5) {\r\n        resultRGB = vec3<f32>(dot(color.rgb, vec3<f32>(0.299, 0.587, 0.114)), 0., 0.);\r\n    }\r\n\r\n    // hue\r\n    resultRGB = hueShift(resultRGB, hue);\r\n\r\n    // saturation\r\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\r\n    let average: f32 = (resultRGB.r + resultRGB.g + resultRGB.b) / 3.0;\r\n\r\n    if (saturation > 0.) {\r\n        resultRGB += (average - resultRGB) * (1. - 1. / (1.001 - saturation));\r\n    } else {\r\n        resultRGB -= (average - resultRGB) * saturation;\r\n    }\r\n\r\n    // lightness\r\n    resultRGB = mix(resultRGB, vec3<f32>(ceil(lightness)) * color.a, abs(lightness));\r\n\r\n    // alpha\r\n    return mix(color, vec4<f32>(resultRGB, color.a), hslUniforms.uAlpha);\r\n}\r\n\r\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\r\nconst k: vec3<f32> = vec3(0.57735, 0.57735, 0.57735);\r\n\r\nfn hueShift(color: vec3<f32>, angle: f32) -> vec3<f32> \r\n{\r\n    let cosAngle: f32 = cos(angle);\r\n    return vec3<f32>(\r\n    color * cosAngle +\r\n    cross(k, color) * sin(angle) +\r\n    k * dot(k, color) * (1.0 - cosAngle)\r\n    );\r\n}";

exports["default"] = source;
//# sourceMappingURL=hsladjustment2.js.map
