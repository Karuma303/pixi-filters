{"version":3,"file":"KawaseBlurFilter.mjs","sources":["../../src/kawase-blur/KawaseBlurFilter.ts"],"sourcesContent":["import { deprecation, Filter, GlProgram, GpuProgram, TexturePool } from 'pixi.js';\r\nimport { vertex, wgslVertex } from '../defaults';\r\nimport fragment from './kawase-blur.frag';\r\nimport source from './kawase-blur.wgsl';\r\nimport fragmentClamp from './kawase-blur-clamp.frag';\r\nimport sourceClamp from './kawase-blur-clamp.wgsl';\r\n\r\nimport type { FilterSystem, PointData, RenderSurface, Texture } from 'pixi.js';\r\n\r\n/** Options for the KawaseBlurFilter constructor. */\r\nexport interface KawaseBlurFilterOptions\r\n{\r\n    /**\r\n     * The blur of the filter. Should be greater than `0`.\r\n     * If value is an Array, setting kernels.\r\n     * @default 4\r\n     */\r\n    strength?: number | [number, number];\r\n    /**\r\n     * The quality of the filter. Should be an integer greater than `1`\r\n     * @default 3\r\n     */\r\n    quality?: number;\r\n    /**\r\n     * Clamp edges, useful for removing dark edges from fullscreen filters or bleeding to the edge of filterArea.\r\n     * @default false\r\n     */\r\n    clamp?: boolean;\r\n    /**\r\n     * Sets the pixel size of the filter. Large size is blurrier. For advanced usage.\r\n     * @default {x:1,y:1}\r\n     */\r\n    pixelSize?: PointData | number[] | number;\r\n}\r\n\r\n/**\r\n * A much faster blur than Gaussian blur, but more complicated to use.<br>\r\n * ![original](../screenshots/original.png)![filter](../screenshots/kawase-blur.png)\r\n *\r\n * @see https://software.intel.com/en-us/blogs/2014/07/15/an-investigation-of-fast-real-time-gpu-based-image-blur-algorithms\r\n * @class\r\n * @extends Filter\r\n */\r\nexport class KawaseBlurFilter extends Filter\r\n{\r\n    /** Default values for options. */\r\n    public static readonly DEFAULT_OPTIONS: KawaseBlurFilterOptions = {\r\n        strength: 4,\r\n        quality: 3,\r\n        clamp: false,\r\n        pixelSize: { x: 1, y: 1 },\r\n    };\r\n\r\n    public uniforms: {\r\n        uOffset: Float32Array;\r\n    };\r\n\r\n    private _pixelSize = { x: 0, y: 0 };\r\n    private _clamp: boolean;\r\n    private _kernels: number[] = [];\r\n    private _blur!: number;\r\n    private _quality!: number;\r\n\r\n    /**\r\n     * @param options - Options for the KawaseBlurFilter constructor.\r\n     */\r\n    constructor(options?: KawaseBlurFilterOptions);\r\n    /**\r\n     * @deprecated since 6.0.0\r\n     *\r\n     * @param {number|number[]} [blur=4] - The blur of the filter. Should be greater than `0`. If\r\n     *        value is an Array, setting kernels.\r\n     * @param {number} [quality=3] - The quality of the filter. Should be an integer greater than `1`.\r\n     * @param {boolean} [clamp=false] - Clamp edges, useful for removing dark edges\r\n     *        from fullscreen filters or bleeding to the edge of filterArea.\r\n     */\r\n    constructor(blur?: number | number[], quality?: number, clamp?: boolean);\r\n    /** @ignore */\r\n    constructor(...args: [KawaseBlurFilterOptions?] | [(number | number[])?, number?, boolean?])\r\n    {\r\n        let options = args[0] ?? {};\r\n\r\n        if (typeof options === 'number' || Array.isArray(options))\r\n        {\r\n            // eslint-disable-next-line max-len\r\n            deprecation('6.0.0', 'KawaseBlurFilter constructor params are now options object. See params: { strength, quality, clamp, pixelSize }');\r\n\r\n            options = { strength: options as number | [number, number] };\r\n\r\n            if (args[1] !== undefined) options.quality = args[1];\r\n            if (args[2] !== undefined) options.clamp = args[2];\r\n        }\r\n\r\n        options = { ...KawaseBlurFilter.DEFAULT_OPTIONS, ...options };\r\n\r\n        const gpuProgram = GpuProgram.from({\r\n            vertex: {\r\n                source: wgslVertex,\r\n                entryPoint: 'mainVertex',\r\n            },\r\n            fragment: {\r\n                source: options?.clamp ? sourceClamp : source,\r\n                entryPoint: 'mainFragment',\r\n            },\r\n        });\r\n        const glProgram = GlProgram.from({\r\n            vertex,\r\n            fragment: options?.clamp ? fragmentClamp : fragment,\r\n            name: 'kawase-blur-filter',\r\n        });\r\n\r\n        super({\r\n            gpuProgram,\r\n            glProgram,\r\n            resources: {\r\n                kawaseBlurUniforms: {\r\n                    uOffset: { value: new Float32Array(2), type: 'vec2<f32>' },\r\n                }\r\n            },\r\n        });\r\n\r\n        this.uniforms = this.resources.kawaseBlurUniforms.uniforms;\r\n\r\n        this.pixelSize = options.pixelSize ?? { x: 1, y: 1 };\r\n\r\n        if (Array.isArray(options.strength))\r\n        {\r\n            this.kernels = options.strength;\r\n        }\r\n        else if (typeof options.strength === 'number')\r\n        {\r\n            this._blur = options.strength;\r\n            this.quality = options.quality ?? 3;\r\n        }\r\n\r\n        this._clamp = !!options.clamp;\r\n    }\r\n\r\n    /**\r\n     * Override existing apply method in `Filter`\r\n     * @override\r\n     * @ignore\r\n     */\r\n    public override apply(\r\n        filterManager: FilterSystem,\r\n        input: Texture,\r\n        output: RenderSurface,\r\n        clearMode: boolean\r\n    ): void\r\n    {\r\n        const uvX = this.pixelSizeX / input.source.width;\r\n        const uvY = this.pixelSizeY / input.source.height;\r\n        let offset;\r\n\r\n        if (this._quality === 1 || this._blur === 0)\r\n        {\r\n            offset = this._kernels[0] + 0.5;\r\n            this.uniforms.uOffset[0] = offset * uvX;\r\n            this.uniforms.uOffset[1] = offset * uvY;\r\n            filterManager.applyFilter(this, input, output, clearMode);\r\n        }\r\n        else\r\n        {\r\n            const renderTarget = TexturePool.getSameSizeTexture(input);\r\n\r\n            let source = input;\r\n            let target = renderTarget;\r\n            let tmp;\r\n\r\n            const last = this._quality - 1;\r\n\r\n            for (let i = 0; i < last; i++)\r\n            {\r\n                offset = this._kernels[i] + 0.5;\r\n                this.uniforms.uOffset[0] = offset * uvX;\r\n                this.uniforms.uOffset[1] = offset * uvY;\r\n                filterManager.applyFilter(this, source, target, true);\r\n\r\n                tmp = source;\r\n                source = target;\r\n                target = tmp;\r\n            }\r\n\r\n            offset = this._kernels[last] + 0.5;\r\n            this.uniforms.uOffset[0] = offset * uvX;\r\n            this.uniforms.uOffset[1] = offset * uvY;\r\n\r\n            filterManager.applyFilter(this, source, output, clearMode);\r\n            TexturePool.returnTexture(renderTarget);\r\n        }\r\n    }\r\n\r\n    /**\r\n      * The amount of blur, value greater than `0`.\r\n      * @default 4\r\n      */\r\n    get strength(): number { return this._blur; }\r\n    set strength(value: number)\r\n    {\r\n        this._blur = value;\r\n        this._generateKernels();\r\n    }\r\n\r\n    /**\r\n      * The quality of the filter, integer greater than `1`.\r\n      * @default 3\r\n      */\r\n    get quality(): number { return this._quality; }\r\n    set quality(value: number)\r\n    {\r\n        this._quality = Math.max(1, Math.round(value));\r\n        this._generateKernels();\r\n    }\r\n\r\n    /**\r\n      * The kernel size of the blur filter, for advanced usage\r\n      * @default [0]\r\n      */\r\n    get kernels(): number[] { return this._kernels; }\r\n    set kernels(value: number[])\r\n    {\r\n        if (Array.isArray(value) && value.length > 0)\r\n        {\r\n            this._kernels = value;\r\n            this._quality = value.length;\r\n            this._blur = Math.max(...value);\r\n        }\r\n        else\r\n        {\r\n            // If value is invalid, set default value\r\n            this._kernels = [0];\r\n            this._quality = 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n      * The size of the pixels. Large size is blurrier. For advanced usage.\r\n      * @default {x:1,y:1}\r\n      */\r\n    get pixelSize(): PointData { return this._pixelSize; }\r\n    set pixelSize(value: PointData | number[] | number)\r\n    {\r\n        if (typeof value === 'number')\r\n        {\r\n            this.pixelSizeX = this.pixelSizeY = value;\r\n\r\n            return;\r\n        }\r\n\r\n        if (Array.isArray(value))\r\n        {\r\n            this.pixelSizeX = value[0];\r\n            this.pixelSizeY = value[1];\r\n\r\n            return;\r\n        }\r\n\r\n        this._pixelSize = value;\r\n    }\r\n\r\n    /**\r\n      * The size of the pixels on the `x` axis. Large size is blurrier. For advanced usage.\r\n      * @default 1\r\n      */\r\n    get pixelSizeX(): number { return this.pixelSize.x; }\r\n    set pixelSizeX(value: number) { this.pixelSize.x = value; }\r\n\r\n    /**\r\n      * The size of the pixels on the `y` axis. Large size is blurrier. For advanced usage.\r\n      * @default 1\r\n      */\r\n    get pixelSizeY(): number { return this.pixelSize.y; }\r\n    set pixelSizeY(value: number) { this.pixelSize.y = value; }\r\n\r\n    /**\r\n      * Get the if the filter is clamped\r\n      * @default false\r\n      */\r\n    get clamp(): boolean { return this._clamp; }\r\n\r\n    /** Update padding based on kernel data */\r\n    private _updatePadding()\r\n    {\r\n        this.padding = Math.ceil(this._kernels.reduce((acc, v) => acc + v + 0.5, 0));\r\n    }\r\n\r\n    /** Auto generate kernels by blur & quality */\r\n    private _generateKernels()\r\n    {\r\n        const blur = this._blur;\r\n        const quality = this._quality;\r\n        const kernels: number[] = [blur];\r\n\r\n        if (blur > 0)\r\n        {\r\n            let k = blur;\r\n            const step = blur / quality;\r\n\r\n            for (let i = 1; i < quality; i++)\r\n            {\r\n                k -= step;\r\n                kernels.push(k);\r\n            }\r\n        }\r\n\r\n        this._kernels = kernels;\r\n        this._updatePadding();\r\n    }\r\n}\r\n"],"names":["source"],"mappings":"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"}