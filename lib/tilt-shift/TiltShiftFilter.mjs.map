{"version":3,"file":"TiltShiftFilter.mjs","sources":["../../src/tilt-shift/TiltShiftFilter.ts"],"sourcesContent":["import { FilterSystem, TexturePool } from 'pixi.js';\r\nimport { TiltShiftAxisFilter } from './TiltShiftAxisFilter';\r\n\r\nimport type { PointData, RenderSurface, Texture } from 'pixi.js';\r\n\r\n/** Options for the TiltShiftFilter constructor. */\r\nexport interface TiltShiftFilterOptions\r\n{\r\n    /** The strength of the blur. */\r\n    blur?: number;\r\n    /** The strength of the blur gradient */\r\n    gradientBlur?: number;\r\n    /** The position to start the effect at. */\r\n    start?: PointData;\r\n    /** The position to end the effect at. */\r\n    end?: PointData;\r\n}\r\n\r\n/**\r\n * A TiltShift Filter. Manages the pass of both a TiltShiftXFilter and TiltShiftYFilter.<br>\r\n * ![original](../screenshots/original.png)![filter](../screenshots/tilt-shift.png)\r\n *\r\n * author Vico @vicocotea\r\n * {@link https://github.com/evanw/glfx.js/blob/master/src/filters/blur/tiltshift.js original filter }\r\n * by {@link http://madebyevan.com/ Evan Wallace }\r\n *\r\n * @class\r\n * @extends Filter\r\n */\r\nexport class TiltShiftFilter extends TiltShiftAxisFilter\r\n{\r\n    private _tiltShiftYFilter: TiltShiftAxisFilter;\r\n\r\n    /**\r\n     * @param options - Options for the TiltShiftFilter constructor.\r\n     */\r\n    constructor(options?: TiltShiftFilterOptions)\r\n    {\r\n        options = { ...TiltShiftAxisFilter.DEFAULT_OPTIONS, ...options };\r\n\r\n        super({ ...options, axis: 'horizontal' });\r\n        this._tiltShiftYFilter = new TiltShiftAxisFilter({ ...options, axis: 'vertical' });\r\n\r\n        Object.assign(this, options);\r\n    }\r\n\r\n    /**\r\n     * Override existing apply method in `Filter`\r\n     * @override\r\n     * @ignore\r\n     */\r\n    public override apply(\r\n        filterManager: FilterSystem,\r\n        input: Texture,\r\n        output: RenderSurface,\r\n        clearMode: boolean,\r\n    ): void\r\n    {\r\n        const renderTarget = TexturePool.getSameSizeTexture(input);\r\n\r\n        filterManager.applyFilter(this, input, renderTarget, true);\r\n        filterManager.applyFilter(this._tiltShiftYFilter, renderTarget, output, clearMode);\r\n\r\n        TexturePool.returnTexture(renderTarget);\r\n    }\r\n\r\n    /** The strength of the blur. */\r\n    get blur(): number { return this.uniforms.uBlur[0]; }\r\n    set blur(value: number) { this.uniforms.uBlur[0] = this._tiltShiftYFilter.uniforms.uBlur[0] = value; }\r\n\r\n    /** The strength of the gradient blur. */\r\n    get gradientBlur(): number { return this.uniforms.uBlur[1]; }\r\n    set gradientBlur(value: number) { this.uniforms.uBlur[1] = this._tiltShiftYFilter.uniforms.uBlur[1] = value; }\r\n\r\n    /** The position to start the effect at. */\r\n    get start(): PointData { return this.uniforms.uStart; }\r\n    set start(value: PointData) { this.uniforms.uStart = this._tiltShiftYFilter.uniforms.uStart = value; }\r\n\r\n    /** The position to start the effect at on the `x` axis. */\r\n    get startX(): number { return this.start.x; }\r\n    set startX(value: number) { this.start.x = value; }\r\n\r\n    /** The position to start the effect at on the `x` axis. */\r\n    get startY(): number { return this.start.y; }\r\n    set startY(value: number) { this.start.y = value; }\r\n\r\n    /** The position to end the effect at. */\r\n    get end(): PointData { return this.uniforms.uEnd; }\r\n    set end(value: PointData) { this.uniforms.uEnd = this._tiltShiftYFilter.uniforms.uEnd = value; }\r\n\r\n    /** The position to end the effect at on the `x` axis. */\r\n    get endX(): number { return this.end.x; }\r\n    set endX(value: number) { this.end.x = value; }\r\n\r\n    /** The position to end the effect at on the `y` axis. */\r\n    get endY(): number { return this.end.y; }\r\n    set endY(value: number) { this.end.y = value; }\r\n}\r\n\r\n"],"names":[],"mappings":"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"}